---
layout: post
title: Self Replicating Code
date: '2009-10-18T17:08:00.000-06:00'
author: Cory Hardman
tags:
- Development
modified_time: '2012-04-21T09:24:24.373-06:00'
blogger_id: tag:blogger.com,1999:blog-880694922178002855.post-5673137721513100031
blogger_orig_url: https://www.coryhardman.com/2009/10/self-replicating-code.html
---

For a class recently the teacher challenged us to write a code snip-bit that would be self replicating. By that I mean write a program that when executed would write out its own source code. This is a bit harder than you'd initially think it to be. My first attempt tried to store the source code within the program when execute it would output what was stored within. However this creates a chick and egg problem. The source code contains the source code. Something that at first stumped me. Then I remembered <a href="http://gcc.gnu.org/onlinedocs/cpp/Stringification.html#Stringification">Stringification</a> in the C preprocessor and I came up with this:<br/><code><pre lang="c"><br/>#include "stdio.h"<br/>#define M(Code) main(){FILE* fp = fopen("source.c", "w");fprintf(fp,"#include \"stdio.h\"\n#define M(Code) %s\nM(%s)\n",#Code,#Code);fclose(fp);}<br/>M(main(){FILE* fp = fopen("source.c", "w");fprintf(fp,"#include \"stdio.h\"\n#define M(Code) %s\nM(%s)\n",#Code,#Code);fclose(fp);})<br/></pre></code><br/><br/>This is a pretty cute program if I can say so myself. When its ran it will create a file called source.c that will be exactly the same as the code above. You could even recompile source.c and it will create another source.c. You should attempt to do this on your own to see if you can come up with other cool ways of doing it.<br/><br/>Download: <a href="http://www.coryhardman.com/wp-content/uploads/2009/10/selfRep.c">SelfRep.c</a>